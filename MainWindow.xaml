<Window x:Class="ManutMap.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="ManutMap – Mapa de Manutenções"
        Height="720" Width="1280"
        Background="#F9FAFB"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
    </Window.Resources>

    <DockPanel>

        <!-- Top Toolbar -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Background="#1F2937" Margin="0,0,0,2">
            <Button x:Name="DownloadButton"
                    Content="Baixar JSON"
                    Style="{StaticResource PrimaryButton}"
                    Click="DownloadButton_Click"/>
            <TextBlock Text="Procura por 'Manutencao_AC2025'"
                       VerticalAlignment="Center"
                       Foreground="White"
                       FontSize="14"
                       Margin="10,0,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- Mapa -->
            <Border Grid.Column="0" Margin="10">
                <wv2:WebView2 x:Name="MapView" Margin="0,0,-98,0"/>
            </Border>

            <!-- Filtros -->
            <Border Grid.Column="1" Background="White" Margin="122,10,10,10" BorderBrush="#E5E7EB" BorderThickness="1">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="9,0,0,0">
                    <StackPanel Margin="20">

                        <TextBlock Text="Filtros" FontSize="20" FontWeight="Bold" Foreground="#111827" Margin="0 0 0 20"/>

                        <!-- Tipo SIGFI -->
                        <TextBlock Text="Tipo SIGFI:" FontWeight="SemiBold"/>
                        <ComboBox x:Name="SigfiFilterCombo" SelectionChanged="FiltersChanged" Margin="0 0 0 15"/>

                        <!-- NumOS -->
                        <TextBlock Text="NumOS:" FontWeight="SemiBold"/>
                        <TextBox x:Name="NumOsFilterBox" TextChanged="FiltersChanged" Margin="0 0 0 15"/>

                        <!-- IDSIGFI -->
                        <TextBlock Text="IDSIGFI:" FontWeight="SemiBold"/>
                        <TextBox x:Name="IdSigfiFilterBox" TextChanged="FiltersChanged" Margin="0 0 0 15"/>

                        <!-- Rota -->
                        <TextBlock Text="Rota:" FontWeight="SemiBold"/>
                        <TextBox x:Name="RotaFilterBox" TextChanged="FiltersChanged" Margin="0 0 0 15"/>

                        <!-- Período -->
                        <TextBlock Text="Período:" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Margin="0 0 0 15">
                            <DatePicker x:Name="StartDatePicker" Width="156" SelectedDateChanged="FiltersChanged" Margin="0 0 10 0"/>
                            <TextBlock Text="a" VerticalAlignment="Center" Margin="0 5 0 0"/>
                            <DatePicker x:Name="EndDatePicker" Width="148" SelectedDateChanged="FiltersChanged" Margin="10 0 0 0"/>
                        </StackPanel>

                        <!-- Camadas -->
                        <TextBlock Text="Camadas:" FontWeight="SemiBold" Margin="0 0 0 5"/>
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                                <CheckBox x:Name="ChbOpen" Content="Aberto" IsChecked="True"
                                          Checked="FiltersChanged" Unchecked="FiltersChanged" Margin="0 0 10 0"/>
                                <TextBox x:Name="TxtColorOpen" Width="100" Text="#FF0000" ToolTip="Cor dos abertos" TextChanged="FiltersChanged"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                                <CheckBox x:Name="ChbClosed" Content="Concluído" IsChecked="True"
                                          Checked="FiltersChanged" Unchecked="FiltersChanged" Margin="0 0 10 0"/>
                                <TextBox x:Name="TxtColorClosed" Width="100" Text="#008000" ToolTip="Cor dos concluídos" TextChanged="FiltersChanged"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Novo: Campo de coordenada -->
                        <TextBlock Text="Coordenadha:" FontWeight="SemiBold" Margin="0 0 0 5"/>
                        <ComboBox x:Name="LatLonFieldCombo"
                                  SelectionChanged="FiltersChanged"
                                  Margin="0 0 0 15">
                            <ComboBoxItem Content="LATLON"/>
                            <ComboBoxItem Content="LATLONCON"/>
                        </ComboBox>

                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </DockPanel>
</Window>
