<Window x:Class="ManutMap.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="ManutMap – Mapa de Manutenções"
        Height="720" Width="1280"
        Background="White"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="0 10 0 0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>

        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0 16 0 8"/>
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="0 4 0 0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- PAINEL LATERAL DE FILTROS -->
        <Border Grid.Column="0" Background="#F9FAFB" BorderBrush="#E5E7EB" BorderThickness="0 0 1 0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="Filtros Avançados" FontSize="18" FontWeight="Bold" Margin="0 0 0 20"/>

                    <!-- Seção de Busca -->
                    <TextBlock Text="Busca" Style="{StaticResource SectionTitle}"/>
                    <TextBlock Text="Tipo SIGFI:"/>
                    <ComboBox x:Name="SigfiFilterCombo" Width="240" SelectionChanged="FiltersChanged"/>

                    <TextBlock Text="Tipo Serviço:"/>
                    <ComboBox x:Name="TipoFilterCombo" Width="240" SelectionChanged="FiltersChanged"/>

                    <TextBlock Text="NumOS:"/>
                    <TextBox x:Name="NumOsFilterBox" Width="240" TextChanged="FiltersChanged"/>

                    <TextBlock Text="IDSIGFI:"/>
                    <TextBox x:Name="IdSigfiFilterBox" Width="240" TextChanged="FiltersChanged"/>

                    <TextBlock Text="Rota:"/>
                    <ComboBox x:Name="RotaFilterCombo" Width="240" SelectionChanged="FiltersChanged"/>

                    <!-- Seção de Período -->
                    <TextBlock Text="Período" Style="{StaticResource SectionTitle}"/>
                    <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                        <DatePicker x:Name="StartDatePicker" Width="110" SelectedDateChanged="FiltersChanged"/>
                        <TextBlock Text=" a " Margin="5 0"/>
                        <DatePicker x:Name="EndDatePicker" Width="110" SelectedDateChanged="FiltersChanged"/>
                    </StackPanel>

                    <!-- Seção de Camadas -->
                    <TextBlock Text="Camadas" Style="{StaticResource SectionTitle}"/>
                    <CheckBox x:Name="ChbOpen" Content="Aberto" IsChecked="True" Checked="FiltersChanged" Unchecked="FiltersChanged"/>
                    <TextBox x:Name="TxtColorOpen" Width="100" Margin="0 0 0 8" Text="#FF0000"/>

                    <CheckBox x:Name="ChbClosed" Content="Concluído" IsChecked="True" Checked="FiltersChanged" Unchecked="FiltersChanged"/>
                    <TextBox x:Name="TxtColorClosed" Width="100" Margin="0 0 0 8" Text="#008000"/>

                    <!-- Seção de Configurações -->
                    <TextBlock Text="Configurações" Style="{StaticResource SectionTitle}"/>
                    <TextBlock Text="Campo Coordenada:"/>
                    <ComboBox x:Name="LatLonFieldCombo" Width="240" SelectionChanged="FiltersChanged">
                        <ComboBoxItem Content="LATLON"/>
                        <ComboBoxItem Content="LATLONCON"/>
                    </ComboBox>

                    <!-- Botão de Ação -->
                    <Button x:Name="DownloadButton"
                            Content="Baixar JSON"
                            Click="DownloadButton_Click"
                            Style="{StaticResource PrimaryButton}"
                            Margin="0 20 0 0"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- MAPA -->
        <Grid Grid.Column="1">
            <wv2:WebView2 x:Name="MapView" />
        </Grid>
    </Grid>
</Window>
